version: '3.4'

services:
  api:
    build:
      context: service
      dockerfile: Dockerfile
    environment:
      - HOST=0.0.0.0
      - PORT=3002
      - DAPR_HTTP_PORT=3500
    ports:
      - "3002:3002"
    networks:
      - valorantnetwork

  api-dapr:
    image: "daprio/daprd:latest"
    command: ["./daprd",
      "-app-id", "api",
      "-app-port", "3002",
      "-dapr-http-port", "3500",
      "-log-level", "debug",
      "-components-path", "./components"]
    volumes:
        - "./components/:/components"
    depends_on:
      - api
    network_mode: "service:api"

networks:
  valorantnetwork:
